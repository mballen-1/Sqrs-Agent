/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package jml.clustering;
import jml.data.*;
import java.util.*;

/**
 *
 * @author jgomez
 */
public abstract class Extraction {
      /**
       * Return the clusters obtained by a clustering algorithm
       * @return A vector with the cluster generated by a clustering algorithm
       */
      public Vector get(DataSource data ){
        Vector[] indices = new Vector[data.size()];
        for( int i=0; i<indices.length; i++ ){
          indices[i] = null;
        }
        int k = 0;
        Enumeration iter = data.elements();
        while( iter.hasMoreElements() ){
          Data d = (Data)iter.nextElement();
          int label = d.getLabel();
          if( 0 <= label && label < data.size() ){
            if( indices[label] == null ){
              indices[label] = new Vector();
            }
            indices[label].add(new Integer(k));
          }
          k++;
        }
        Vector clusters = new Vector();

        for( int i=0; i<indices.length; i++ ){
          if( indices[i] != null ){
            clusters.add( new Cluster( data, indices[i], i) );
          }
        }

        refine( clusters );

        return clusters;
      }


      public abstract void refine( Vector clusters );
}
